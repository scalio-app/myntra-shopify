{% extends "base.html" %}
{% block content %}
<div class="grid grid-cols-1 md:grid-cols-3 gap-6">
  <div class="card bg-base-100 shadow">
    <div class="card-body">
      <h2 class="card-title">Upload a File</h2>
      <form method="post" action="/ui/files" enctype="multipart/form-data" class="space-y-2">
        <input type="file" name="file" class="file-input file-input-bordered w-full" required />
        <button type="submit" class="btn btn-primary">Upload</button>
      </form>
    </div>
  </div>
  <div class="card bg-base-100 shadow">
    <div class="card-body">
      <h2 class="card-title">Transform</h2>
      <p>Convert Myntra CSV/Excel to Shopify CSV</p>
      <div class="card-actions justify-end">
        <a class="btn btn-secondary" href="/ui/transform">Open Wizard</a>
      </div>
    </div>
  </div>
  <div class="card bg-base-100 shadow">
    <div class="card-body">
      <h2 class="card-title">Images</h2>
      <p>Attach images by SKU/Base or Broadcast</p>
      <div class="card-actions justify-end">
        <a class="btn" href="/ui/images">Open Tools</a>
      </div>
    </div>
  </div>
</div>

<div class="mt-8 grid grid-cols-1 md:grid-cols-2 gap-6">
  <div class="card bg-base-100 shadow">
    <div class="card-body">
      <h2 class="card-title">Recent Jobs</h2>
      <div class="overflow-x-auto">
        <table class="table table-zebra w-full">
          <thead><tr><th>ID</th><th>Kind</th><th>Status</th><th>Count</th></tr></thead>
          <tbody>
            {% for j in jobs %}
            <tr>
              <td><a class="link" href="/ui/jobs/{{ j.id }}">{{ j.id[:8] }}</a></td>
              <td>{{ j.kind }}</td>
              <td><span class="badge">{{ j.status }}</span></td>
              <td>{{ j.counters.get('rows') or j.counters.get('files') or j.counters.get('uploaded') or '' }}</td>
            </tr>
            {% else %}
            <tr><td colspan="4" class="text-base-content/60">No jobs yet</td></tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>
  <div class="card bg-base-100 shadow">
    <div class="card-body">
      <h2 class="card-title">Recent Files</h2>
      <div class="overflow-x-auto">
        <table class="table w-full">
          <thead><tr><th>ID</th><th>Name</th><th>Size</th></tr></thead>
          <tbody>
            {% for f in files %}
            <tr>
              <td class="font-mono text-xs">{{ f.id }}</td>
              <td>{{ f.name }}</td>
              <td>{{ f.size }}</td>
            </tr>
            {% else %}
            <tr><td colspan="3" class="text-base-content/60">No files yet</td></tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
{% endblock %}
